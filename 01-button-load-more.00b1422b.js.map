{"mappings":"iiBAAA,IAcIA,EAdJC,EAAAC,EAAA,S,8EAOMC,EAAqBC,SAASC,cAAc,gBAC5CC,EAAYF,SAASC,cAAc,YACnCE,EAAgBH,SAASC,cAAc,cAEvCG,EAAa,IAAI,EAAAC,EAAAC,YACnBC,EAAe,E,SAuBJC,I,OAAAA,EAAfC,EAAAZ,EAAA,CAAAY,EAAAC,GAAAC,MAAA,SAAAC,I,IAGUC,E,yEAFRT,EAAWU,KAAO,E,kBAEKV,EAAWW,Y,OACL,KADrBF,EAAMG,EAAAC,MACDC,KAAKC,QACdC,EAAAC,OAAOC,QACL,4EAEFnB,EAAcoB,UAAUC,IAAI,eAE5BJ,EAAAC,OAAOI,QAAQ,oBAAqCC,OAAjBb,EAAOc,UAAU,cACpD,EAAAC,EAAAC,eAAchB,EAAQX,GACtBN,EAAiB,IAAIa,EAAAqB,GAAJ,CAAmB,aAAc,CAChDC,aAAc,MACdC,aAAc,MAEZnB,EAAOc,WAAavB,EAAW6B,QACjC9B,EAAcoB,UAAUC,IAAI,aAE5BrB,EAAcoB,UAAUW,OAAO,aAEjC3B,GAAgBM,EAAOK,KAAKC,Q,gDAG9BgB,QAAQC,IAAIpB,EAAAqB,GAAMC,S,QAEpBC,EAAAC,QAAQN,SACRO,EAAoB,G,0DA3BQC,MAAAC,KAAAC,U,UAqCfC,I,OAAAA,EAAfpC,EAAAZ,EAAA,CAAAY,EAAAC,GAAAC,MAAA,SAAAC,I,IAEUC,E,2FAAeT,EAAWW,Y,OAA1BF,EAAMG,EAAAC,MACZ,EAAAW,EAAAC,eAAchB,EAAQX,GACtBN,EAAekD,WACfvC,GAAgBM,EAAOK,KAAKC,SACRN,EAAOc,YACzBxB,EAAcoB,UAAUC,IAAI,aAC5BJ,EAAAC,OAAO0B,QACL,+D,kDAIJZ,QAAQC,IAAIpB,EAAAqB,GAAMC,S,QAEpBC,EAAAC,QAAQN,SACRO,EAAoB,G,2DAhBOC,MAAAC,KAAAC,U,CAmB7B,SAASH,EAAoBO,GAC3B,IAAQC,EAAuBjD,SAC5BC,cAAc,YACdiD,kBAAkBC,wBAFbC,OAIRC,OAAOC,SAAS,CACdC,IAAKN,EAAaD,EAClBQ,SAAU,U,CAlFdzD,EAAmB0D,iBAAiB,UAEpC,SAA0BC,GAQxB,GAPAA,EAAIC,iBAEJxD,EAAcoB,UAAUC,IAAI,aAC5BtB,EAAU0D,UAAY,GACtBrD,EAAe,EACfH,EAAWyD,MAAQH,EAAII,cAAcC,SAASC,YAAYC,MAAMC,QAE3D9D,EAAWyD,MACd,OAAOzC,EAAAC,OAAO0B,QAAQ,iC,WAQXvC,EAAekC,MAAAC,KAAAC,U,EAL5BuB,GAEAT,EAAIU,OAAOC,O,IAiCblE,EAAcsD,iBAAiB,SAE/B,WACErD,EAAWU,MAAQ,E,WAIN+B,EAAcH,MAAAC,KAAAC,U,CAH3B0B,E","sources":["src/js/01-button-load-more.js"],"sourcesContent":["import { Notify } from 'notiflix/build/notiflix-notify-aio';\nimport { Loading } from 'notiflix/build/notiflix-loading-aio';\nimport SimpleLightbox from 'simplelightbox';\nimport 'simplelightbox/dist/simple-lightbox.min.css';\nimport { markUpGallery } from './mark-up-gallery';\nimport { PixabayAPI } from './pixabay-api';\n\nconst searchImagesFormEl = document.querySelector('.search-form');\nconst galleryEl = document.querySelector('.gallery');\nconst loadMoreBtnEl = document.querySelector('.load-more');\n\nconst pixabayAPI = new PixabayAPI();\nlet showedImages = 0;\n\nlet simpleLightbox;\n\nsearchImagesFormEl.addEventListener('submit', handleSubmitForm);\n\nfunction handleSubmitForm(evt) {\n  evt.preventDefault();\n\n  loadMoreBtnEl.classList.add('is-hidden');\n  galleryEl.innerHTML = '';\n  showedImages = 0;\n  pixabayAPI.query = evt.currentTarget.elements.searchQuery.value.trim();\n\n  if (!pixabayAPI.query) {\n    return Notify.warning('Please enter a picture title');\n  }\n\n  renderFirstPage();\n\n  evt.target.reset();\n}\n\nasync function renderFirstPage() {\n  pixabayAPI.page = 1;\n  try {\n    const images = await pixabayAPI.getImages();\n    if (images.hits.length === 0) {\n      Notify.failure(\n        'Sorry, there are no images matching your search query. Please try again.'\n      );\n      loadMoreBtnEl.classList.add('is-hidden');\n    } else {\n      Notify.success(`Hooray! We found ${images.totalHits} images.`);\n      markUpGallery(images, galleryEl);\n      simpleLightbox = new SimpleLightbox('.gallery a', {\n        captionsData: 'alt',\n        captionDelay: 250,\n      });\n      if (images.totalHits <= pixabayAPI.perPage) {\n        loadMoreBtnEl.classList.add('is-hidden');\n      } else {\n        loadMoreBtnEl.classList.remove('is-hidden');\n      }\n      showedImages += images.hits.length;\n    }\n  } catch (error) {\n    console.log(error.message);\n  }\n  Loading.remove();\n  smoothPageScrolling(1);\n}\n\nloadMoreBtnEl.addEventListener('click', handleLoadMoreBtnClick);\n\nfunction handleLoadMoreBtnClick() {\n  pixabayAPI.page += 1;\n  renderNextPage();\n}\n\nasync function renderNextPage() {\n  try {\n    const images = await pixabayAPI.getImages();\n    markUpGallery(images, galleryEl);\n    simpleLightbox.refresh();\n    showedImages += images.hits.length;\n    if (showedImages >= images.totalHits) {\n      loadMoreBtnEl.classList.add('is-hidden');\n      Notify.warning(\n        \"We're sorry, but you've reached the end of search results.\"\n      );\n    }\n  } catch (error) {\n    console.log(error.message);\n  }\n  Loading.remove();\n  smoothPageScrolling(2);\n}\n\nfunction smoothPageScrolling(number) {\n  const { height: cardHeight } = document\n    .querySelector('.gallery')\n    .firstElementChild.getBoundingClientRect();\n\n  window.scrollBy({\n    top: cardHeight * number,\n    behavior: 'smooth',\n  });\n}\n"],"names":["$a3bc4079fb5f3aa8$var$simpleLightbox","$bpxeT","parcelRequire","$a3bc4079fb5f3aa8$var$searchImagesFormEl","document","querySelector","$a3bc4079fb5f3aa8$var$galleryEl","$a3bc4079fb5f3aa8$var$loadMoreBtnEl","$a3bc4079fb5f3aa8$var$pixabayAPI","$8H72y","PixabayAPI","$a3bc4079fb5f3aa8$var$showedImages","$a3bc4079fb5f3aa8$var$_renderFirstPage","$parcel$interopDefault","$2TvXO","mark","_callee","images","page","getImages","_ctx","sent","hits","length","$h6c0i","Notify","failure","classList","add","success","concat","totalHits","$aRqpP","markUpGallery","$5IjG7","captionsData","captionDelay","perPage","remove","console","log","t0","message","$7rQOT","Loading","$a3bc4079fb5f3aa8$var$smoothPageScrolling","apply","this","arguments","$a3bc4079fb5f3aa8$var$_renderNextPage","refresh","warning","number","cardHeight","firstElementChild","getBoundingClientRect","height","window","scrollBy","top","behavior","addEventListener","evt","preventDefault","innerHTML","query","currentTarget","elements","searchQuery","value","trim","$a3bc4079fb5f3aa8$var$renderFirstPage","target","reset","$a3bc4079fb5f3aa8$var$renderNextPage"],"version":3,"file":"01-button-load-more.00b1422b.js.map"}