{"mappings":"qhBAAA,IAAAA,EAAAC,EAAA,S,oDAOA,MAAMC,EAAqBC,SAASC,cAAc,gBAC5CC,EAAYF,SAASC,cAAc,YACnCE,EAAgBH,SAASC,cAAc,cAEvCG,EAAa,IAAI,EAAAC,EAAAC,YACvB,IAEIC,EAFAC,EAAe,EA+EnB,SAASC,EAAoBC,GAC3B,MAAQC,OAAQC,GAAeZ,SAC5BC,cAAc,YACdY,kBAAkBC,wBAErBC,OAAOC,SAAS,CACdC,IAAKL,EAAaF,EAClBQ,SAAU,U,CAlFdnB,EAAmBoB,iBAAiB,UAEpC,SAA0BC,GAQxB,GAPAA,EAAIC,iBAEJlB,EAAcmB,UAAUC,IAAI,aAC5BrB,EAAUsB,UAAY,GACtBhB,EAAe,EACfJ,EAAWqB,MAAQL,EAAIM,cAAcC,SAASC,YAAYC,MAAMC,QAE3D1B,EAAWqB,MACd,OAAO5B,EAAAkC,OAAOC,QAAQ,iCAQ1BC,iBACE7B,EAAW8B,KAAO,EAClB,IACE,MAAMC,QAAe/B,EAAWgC,YACL,IAAvBD,EAAOE,KAAKC,QACdzC,EAAAkC,OAAOQ,QACL,4EAEFpC,EAAcmB,UAAUC,IAAI,eAE5B1B,EAAAkC,OAAOS,QAAQ,oBAAoBL,EAAOM,sBAC1C,EAAAC,EAAAC,eAAcR,EAAQjC,GACtBK,EAAiB,IAAIqC,EAAAC,GAAJ,CAAmB,aAAc,CAChDC,aAAc,MACdC,aAAc,MAEZZ,EAAOM,WAAarC,EAAW4C,QACjC7C,EAAcmB,UAAUC,IAAI,aAE5BpB,EAAcmB,UAAU2B,OAAO,aAEjCzC,GAAgB2B,EAAOE,KAAKC,O,CAE9B,MAAOY,GACPC,QAAQC,IAAIF,EAAMG,Q,CAEpBC,EAAAC,QAAQN,SACRxC,EAAoB,E,EAhCpB+C,GAEApC,EAAIqC,OAAOC,O,IAiCbvD,EAAcgB,iBAAiB,SAE/B,WACEf,EAAW8B,MAAQ,EAIrBD,iBACE,IACE,MAAME,QAAe/B,EAAWgC,aAChC,EAAAM,EAAAC,eAAcR,EAAQjC,GACtBK,EAAeoD,UACfnD,GAAgB2B,EAAOE,KAAKC,OACxB9B,GAAgB2B,EAAOM,YACzBtC,EAAcmB,UAAUC,IAAI,aAC5B1B,EAAAkC,OAAOC,QACL,8D,CAGJ,MAAOkB,GACPC,QAAQC,IAAIF,EAAMG,Q,CAEpBC,EAAAC,QAAQN,SACRxC,EAAoB,E,CAnBpBmD,E","sources":["src/js/01-button-load-more.js"],"sourcesContent":["import { Notify } from 'notiflix/build/notiflix-notify-aio';\nimport { Loading } from 'notiflix/build/notiflix-loading-aio';\nimport SimpleLightbox from 'simplelightbox';\nimport 'simplelightbox/dist/simple-lightbox.min.css';\nimport { markUpGallery } from './mark-up-gallery';\nimport { PixabayAPI } from './pixabay-api';\n\nconst searchImagesFormEl = document.querySelector('.search-form');\nconst galleryEl = document.querySelector('.gallery');\nconst loadMoreBtnEl = document.querySelector('.load-more');\n\nconst pixabayAPI = new PixabayAPI();\nlet showedImages = 0;\n\nlet simpleLightbox;\n\nsearchImagesFormEl.addEventListener('submit', handleSubmitForm);\n\nfunction handleSubmitForm(evt) {\n  evt.preventDefault();\n\n  loadMoreBtnEl.classList.add('is-hidden');\n  galleryEl.innerHTML = '';\n  showedImages = 0;\n  pixabayAPI.query = evt.currentTarget.elements.searchQuery.value.trim();\n\n  if (!pixabayAPI.query) {\n    return Notify.warning('Please enter a picture title');\n  }\n\n  renderFirstPage();\n\n  evt.target.reset();\n}\n\nasync function renderFirstPage() {\n  pixabayAPI.page = 1;\n  try {\n    const images = await pixabayAPI.getImages();\n    if (images.hits.length === 0) {\n      Notify.failure(\n        'Sorry, there are no images matching your search query. Please try again.'\n      );\n      loadMoreBtnEl.classList.add('is-hidden');\n    } else {\n      Notify.success(`Hooray! We found ${images.totalHits} images.`);\n      markUpGallery(images, galleryEl);\n      simpleLightbox = new SimpleLightbox('.gallery a', {\n        captionsData: 'alt',\n        captionDelay: 250,\n      });\n      if (images.totalHits <= pixabayAPI.perPage) {\n        loadMoreBtnEl.classList.add('is-hidden');\n      } else {\n        loadMoreBtnEl.classList.remove('is-hidden');\n      }\n      showedImages += images.hits.length;\n    }\n  } catch (error) {\n    console.log(error.message);\n  }\n  Loading.remove();\n  smoothPageScrolling(1);\n}\n\nloadMoreBtnEl.addEventListener('click', handleLoadMoreBtnClick);\n\nfunction handleLoadMoreBtnClick() {\n  pixabayAPI.page += 1;\n  renderNextPage();\n}\n\nasync function renderNextPage() {\n  try {\n    const images = await pixabayAPI.getImages();\n    markUpGallery(images, galleryEl);\n    simpleLightbox.refresh();\n    showedImages += images.hits.length;\n    if (showedImages >= images.totalHits) {\n      loadMoreBtnEl.classList.add('is-hidden');\n      Notify.warning(\n        \"We're sorry, but you've reached the end of search results.\"\n      );\n    }\n  } catch (error) {\n    console.log(error.message);\n  }\n  Loading.remove();\n  smoothPageScrolling(2);\n}\n\nfunction smoothPageScrolling(number) {\n  const { height: cardHeight } = document\n    .querySelector('.gallery')\n    .firstElementChild.getBoundingClientRect();\n\n  window.scrollBy({\n    top: cardHeight * number,\n    behavior: 'smooth',\n  });\n}\n"],"names":["$iQIUW","parcelRequire","$bfec068bdf3902c4$var$searchImagesFormEl","document","querySelector","$bfec068bdf3902c4$var$galleryEl","$bfec068bdf3902c4$var$loadMoreBtnEl","$bfec068bdf3902c4$var$pixabayAPI","$6fOXY","PixabayAPI","$bfec068bdf3902c4$var$simpleLightbox","$bfec068bdf3902c4$var$showedImages","$bfec068bdf3902c4$var$smoothPageScrolling","number","height","cardHeight","firstElementChild","getBoundingClientRect","window","scrollBy","top","behavior","addEventListener","evt","preventDefault","classList","add","innerHTML","query","currentTarget","elements","searchQuery","value","trim","Notify","warning","async","page","images","getImages","hits","length","failure","success","totalHits","$2Rajk","markUpGallery","$parcel$interopDefault","$fZKcF","captionsData","captionDelay","perPage","remove","error","console","log","message","$dSs1Y","Loading","$bfec068bdf3902c4$var$renderFirstPage","target","reset","refresh","$bfec068bdf3902c4$var$renderNextPage"],"version":3,"file":"01-button-load-more.b5f68cbe.js.map"}